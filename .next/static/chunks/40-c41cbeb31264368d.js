"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{594:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(157).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},968:(e,t,a)=>{a.d(t,{b:()=>l});var s=a(2115),i=a(3655),r=a(5155),n=s.forwardRef((e,t)=>(0,r.jsx)(i.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var l=n},6298:(e,t,a)=>{a.d(t,{A:()=>f});var s=a(5155),i=a(2115),r=a(285),n=a(5318),l=a(5695),c=a(7481),o=a(3062),p=a(3819),d=a(7717),u=a(3203),y=a(6370),h=a(3140);function g(e){let{isOpen:t,onClose:a,onShareCreated:g,originPage:f,initialSelectedEntityTypes:m,initialIncludeRelationships:T,initialIncludeInteractions:D,initialDatasetName:N,initialDescription:v,initialTarget:x,hideSelectDataTypesStep:w}=e,S=(0,l.useSearchParams)(),b=(0,l.useRouter)(),{toast:k}=(0,c.dj)(),j="true"===S.get("showPreview");S.get("step");let O=w?[{id:"selectData",label:"Configure data"},{id:"reviewDataset",label:"Review dataset"}]:[{id:"selectDataTypes",label:"Select data types"},{id:"selectData",label:"Configure data"},{id:"reviewDataset",label:"Review dataset"}],[J,C]=(0,i.useState)(()=>{if(w)return"selectData";let e=S.get("step");return e&&O.some(t=>t.id===e)?e:"selectDataTypes"}),[A,z]=(0,i.useState)(()=>{var e,t;let a,s,i,r,n;let l=m||(null===(e=S.get("preselectEntities"))||void 0===e?void 0:e.split(","))||[],c=null!=T?T:"true"===S.get("includeRelationships"),p=null!=D?D:"true"===S.get("includeInteractions"),d=N||S.get("datasetName")||"",u=v||S.get("description")||"",y=x||S.get("target")||"";return"true"===S.get("openWizard")&&["reviewDataset","configureData"].includes(S.get("step")||"")&&"ai-agent-flow"===f?(a=JSON.parse(JSON.stringify(o.WG)).map(e=>({...e,selected:["entities","relationships","interactions","mergeTree","matchData"].includes(e.id)})),s=JSON.parse(JSON.stringify(o.V)).map(e=>({...e,selected:["organization","supplier","product"].includes(e.id)})),i=JSON.parse(JSON.stringify(o.YS)).map(e=>({...e,selected:!0})),r=JSON.parse(JSON.stringify(o.K9)).map(e=>({...e,selected:!0})),n=JSON.parse(JSON.stringify(o.el)).map(e=>({...e,selected:["mergeTree","matchData"].includes(e.id)}))):w?(a=JSON.parse(JSON.stringify(o.WG)).map(e=>"entities"===e.id?{...e,selected:l.length>0}:"relationships"===e.id?{...e,selected:!!c}:"interactions"===e.id?{...e,selected:!!p}:{...e,selected:!1}),s=JSON.parse(JSON.stringify(o.V)).map(e=>({...e,selected:l.length>0&&l.includes(e.id)})),i=JSON.parse(JSON.stringify(o.YS)).map(e=>({...e,selected:c})),r=JSON.parse(JSON.stringify(o.K9)).map(e=>({...e,selected:p})),n=JSON.parse(JSON.stringify(o.el)).map(e=>({...e,selected:!1}))):(a=JSON.parse(JSON.stringify(o.WG)).map(e=>({...e,selected:!1})),s=JSON.parse(JSON.stringify(o.V)).map(e=>({...e,selected:!1})),i=JSON.parse(JSON.stringify(o.YS)).map(e=>({...e,selected:!1})),r=JSON.parse(JSON.stringify(o.K9)).map(e=>({...e,selected:!1})),n=JSON.parse(JSON.stringify(o.el)).map(e=>({...e,selected:!1}))),{selectedDataTypes:a,entityTypes:s,relationshipTypes:i,interactionTypes:r,otherDataTypes:n,datasetName:d||"",description:u,target:y||(null===(t=o.Gl[0])||void 0===t?void 0:t.id)||""}}),[P,R]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(t){let e=S.get("step");S.get("showPreview"),w?C("selectData"):e&&O.some(t=>t.id===e)&&C(e)}},[t,w,O]),(0,i.useEffect)(()=>{if(J){let e=new URL(window.location.href);e.searchParams.set("step","selectData"===J?"configureData":J),window.history.replaceState({},"",e.toString())}},[J]);let W=e=>{z(t=>{var a;let s=t.selectedDataTypes.map(t=>t.id===e?{...t,selected:!t.selected}:t),i=(null===(a=s.find(t=>t.id===e))||void 0===a?void 0:a.selected)||!1,r=t.entityTypes,n=t.relationshipTypes,l=t.interactionTypes,c=t.otherDataTypes;return"entities"===e?r=t.entityTypes.map(e=>({...e,selected:!!i&&e.selected})):"relationships"===e?n=t.relationshipTypes.map(e=>({...e,selected:!!i&&e.selected})):"interactions"===e?l=t.interactionTypes.map(e=>({...e,selected:!!i&&e.selected})):["mergeTree","matchData","activityLog","workflowTasks"].includes(e)&&(c=t.otherDataTypes.map(t=>t.id===e?{...t,selected:i}:t)),{...t,selectedDataTypes:s,entityTypes:r,relationshipTypes:n,interactionTypes:l,otherDataTypes:c,datasetName:t.datasetName,description:t.description,target:t.target}})},$=e=>{z(t=>({...t,entityTypes:t.entityTypes.map(t=>t.id===e?{...t,selected:!t.selected}:t)}))},E=e=>{z(t=>({...t,relationshipTypes:t.relationshipTypes.map(t=>t.id===e?{...t,selected:!t.selected}:t)}))},M=e=>{z(t=>({...t,interactionTypes:t.interactionTypes.map(t=>t.id===e?{...t,selected:!t.selected}:t)}))},G=e=>{z(t=>({...t,otherDataTypes:t.otherDataTypes.map(t=>t.id===e?{...t,selected:!t.selected}:t)}))},_=(e,t,a)=>{z(s=>{let i={...s},r=a.filter(e=>e.selected).length;switch(t){case"entity":i.entityTypes=i.entityTypes.map(t=>t.id===e?{...t,attributes:a,selectedAttributesCount:r}:t);break;case"relationship":i.relationshipTypes=i.relationshipTypes.map(t=>t.id===e?{...t,attributes:a,selectedAttributesCount:r}:t);break;case"interaction":i.interactionTypes=i.interactionTypes.map(t=>t.id===e?{...t,attributes:a,selectedAttributesCount:r}:t);break;case"other":i.otherDataTypes=i.otherDataTypes.map(t=>t.id===e?{...t,attributes:a,selectedAttributesCount:r}:t)}return i})},I=(0,i.useCallback)((e,t)=>{if("entity"===t){if("organization"===e)return o._k;if("product"===e)return o.sW;if("supplier"===e)return o.NR}return"relationship"===t?o.Xr:"interaction"===t?o.nZ:"other"===t?o.FR:[]},[]),L=()=>{C("selectData"),b.push("".concat("ai-agent-flow"===f?"/ai-agent-flow":"/phase1","?openWizard=true&step=configureData"))},V=()=>{if(!(A.entityTypes.some(e=>e.selected)||A.relationshipTypes.some(e=>e.selected)||A.interactionTypes.some(e=>e.selected)||A.otherDataTypes.some(e=>e.selected))){alert("Please select at least one item to continue.");return}C("reviewDataset"),b.replace("".concat("ai-agent-flow"===f?"/ai-agent-flow":"/phase1","?openWizard=true&step=reviewDataset"),{scroll:!1})},Y=()=>{C("selectData"),b.push("".concat("ai-agent-flow"===f?"/ai-agent-flow":"/phase1","?openWizard=true&step=configureData"))},B=()=>{C("selectDataTypes"),b.push("".concat("ai-agent-flow"===f?"/ai-agent-flow":"/phase1","?openWizard=true&step=selectDataTypes"))},K=()=>{alert("Dataset configuration saved (mock).")},q=()=>{R(!0)};return t?(0,s.jsxs)("div",{className:"flex flex-col h-full w-full bg-popover shadow-2xl",children:[(0,s.jsxs)("div",{className:"p-4 border-b flex flex-row items-center justify-between shrink-0 relative h-[70px] bg-background sticky top-0 z-10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(r.$,{variant:"ghost",size:"icon",onClick:a,className:"rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 w-8 h-8",children:[(0,s.jsx)(n.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,s.jsx)("span",{className:"text-lg font-semibold",children:j?"Preview Data Share":"Create new data share"})]}),(0,s.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,s.jsx)(y.A,{currentStep:J,steps:O})}),(0,s.jsx)("div",{className:"flex items-center",children:j?(0,s.jsx)(r.$,{onClick:a,className:"bg-foreground hover:bg-foreground/90 text-background px-6 py-2 h-auto",children:"Close Preview"}):(()=>{switch(J){case"selectDataTypes":if(w)return null;return(0,s.jsx)(r.$,{onClick:L,disabled:!A.selectedDataTypes.some(e=>e.selected),children:"Next"});case"selectData":return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[!w&&(0,s.jsx)(r.$,{variant:"outline",onClick:B,className:"px-6 py-2 h-auto",children:"Back"}),(0,s.jsx)(r.$,{onClick:V,disabled:!A.entityTypes.some(e=>e.selected)&&!A.relationshipTypes.some(e=>e.selected)&&!A.interactionTypes.some(e=>e.selected)&&!A.otherDataTypes.some(e=>e.selected),children:"Continue"})]});case"reviewDataset":return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(r.$,{variant:"outline",onClick:Y,className:"px-6 py-2 h-auto",children:"Back"}),(0,s.jsx)(r.$,{variant:"outline",onClick:K,className:"px-6 py-2 h-auto",children:"Save"}),(0,s.jsx)(r.$,{onClick:q,children:"Share"})]});default:return(0,s.jsx)("div",{className:"w-[88px]"})}})()})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto bg-background",children:(()=>{switch(J){case"selectDataTypes":if(w)return null;return(0,s.jsx)(p.A,{dataTypes:A.selectedDataTypes,onDataTypeToggle:W});case"selectData":return(0,s.jsx)(d.A,{selectedDataTypes:A.selectedDataTypes,entityTypes:A.entityTypes,relationshipTypes:A.relationshipTypes,interactionTypes:A.interactionTypes,otherDataTypes:A.otherDataTypes,onEntityTypeToggle:$,onRelationshipTypeToggle:E,onInteractionTypeToggle:M,onOtherDataTypeToggle:G,onAttributesChange:_,getSampleData:I});case"reviewDataset":return(0,s.jsx)(u.A,{config:A,getSampleData:I});default:return null}})()}),!j&&"reviewDataset"===J&&(0,s.jsx)(h.A,{isOpen:P,onClose:()=>{R(!1)},onStartSharing:(e,t,i)=>{g({id:Date.now().toString(),name:e,description:t,createdBy:"current.user",shareDestination:i.name,sharingStatus:"Active",summary:{profiles:A.entityTypes.filter(e=>e.selected).reduce((e,t)=>e+t.count,0),relationships:A.relationshipTypes.filter(e=>e.selected).reduce((e,t)=>e+t.count,0),interactions:A.interactionTypes.filter(e=>e.selected).reduce((e,t)=>e+t.count,0),otherData:A.otherDataTypes.filter(e=>e.selected).reduce((e,t)=>e+t.count,0)}}),R(!1),k({title:"Data sharing activated",description:"You can manage it from the data share page",action:(0,s.jsx)(r.$,{variant:"outline",onClick:()=>b.push("/phase1?tab=data-share"),className:"mt-2",children:"View data shares"}),duration:5e3}),a()},initialDatasetName:A.datasetName,initialDescription:A.description,initialTargetId:A.target})]}):null}function f(e){return(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(g,{...e})})}},8763:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(157).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])}}]);